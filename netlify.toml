[build]
  publish = "src/"

# Turn off asset processing to support preloading fonts with a link tag. Netlify
# doesn't rewrite link tags to match their hashed asset name, or allow
# fine-grained exclusion of fonts from processing.
# https://answers.netlify.com/t/asset-optimization-preloading-fonts/3197/10
[build.processing]
  skip_processing = true

# Set selected assets to far future expiry to eek out a tiny bit more
# performance, managing cache busting manually. This is a very minor
# optimization, but I can't bring myself to make network roundtrips on every
# page load for never-changing assets.
[[headers]]
  for = "/*.woff2"
  [headers.values]
    cache-control = '''
    max-age=31536000,
    s-maxage=31536000,
    immutable'''

[[headers]]
  for = "/favicon-64.png"
  [headers.values]
    cache-control = '''
    max-age=31536000,
    s-maxage=31536000,
    immutable'''

# [[plugins]]
#   # Installs the Lighthouse Build Plugin for all deploy contexts
#   package = "@netlify/plugin-lighthouse"
